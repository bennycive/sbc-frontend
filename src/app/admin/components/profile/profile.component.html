<div class="container py-5">
  <div class="row">
    <!-- LEFT SIDE: FORM -->
    <div class="col-md-8">
      <div class="card p-4 shadow-sm">
        <h5 class="mb-4 fw-bold">General information</h5>
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">First Name</label>
            <input class="form-control" [(ngModel)]="user.firstName" name="firstName" type="text"
              placeholder="Enter your first name" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <label class="form-label">Middle Name</label>
            <input class="form-control" [(ngModel)]="user.middleName" name="middleName" type="text"
              placeholder="Also your middle name" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <label class="form-label">Last Name</label>
            <input class="form-control" [(ngModel)]="user.lastName" name="lastName" type="text"
              placeholder="Also your last name" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <label class="form-label">Birthday</label>
            <input class="form-control" [(ngModel)]="user.birthday" name="birthday" type="date" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <label class="form-label">Gender</label>
            <select class="form-select" [(ngModel)]="user.gender" name="gender" [disabled]="isReadonly"  >
              <option disabled selected>Select Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label">Email</label>
            <input class="form-control" [(ngModel)]="user.email" name="email" type="email"
              placeholder="name@company.com" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <label class="form-label">Phone</label>
            <input class="form-control" [(ngModel)]="user.phone" name="phone" type="tel"
              placeholder="+255 123 456 789" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-8">
            <label class="form-label">National ID Number (NIN)</label>
            <input class="form-control" [(ngModel)]="user.nin" name="nin" type="text" pattern="^[0-9]{20}$"
              title="NIN must be exactly 20 digits" [readonly]="isReadonly" required   />
          </div>
        </div>

        <hr class="my-4">

        <h5 class="mb-3 fw-bold">Address</h5>
        <div class="row g-3">
          <div class="col-md-8">
            <input class="form-control" [(ngModel)]="user.address" name="address" type="text"
              placeholder="Enter your home address" [readonly]="isReadonly"  >
          </div>
          <div class="col-md-4">
            <input class="form-control" [(ngModel)]="user.houseNumber" name="houseNumber"
              placeholder="House No." [readonly]="isReadonly"  >
          </div>
          <div class="col-md-6">
            <input class="form-control" [(ngModel)]="user.city" name="city" placeholder="City"
              [readonly]="isReadonly"  >
          </div>
          <div class="col-md-6">
            <input class="form-control" [(ngModel)]="user.zip" name="zip" placeholder="ZIP" [readonly]="isReadonly"  >
          </div>
        </div>

        <div class="mt-4 text-end">
          <button *ngIf="isReadonly" class="btn btn-primary px-4" (click)="enableEdit()">Update</button>
          <button *ngIf="!isReadonly" class="btn btn-success px-4" (click)="save()">Save All</button>
        </div>
      </div>
    </div>

    <!-- RIGHT SIDE: PROFILE CARD -->
    <div class="col-md-4 mt-4 mt-md-0">
      <div class="card shadow-sm p-3 text-center">
        <div class="position-relative d-flex justify-content-center">
          <img [src]="user.image || 'assets/profile/profile2.jpeg'" alt="Profile"
            class="rounded-circle border border-4 border-white shadow" width="120" height="120">
        </div>
        <h5 class="mt-3 text-capitalize">{{ user.firstName }} {{ user.lastName }}</h5>
        <p class="text-muted mb-1">{{ user.email }}</p>
        <p class="text-muted">New York, USA</p>
      </div>

      <div class="card mt-3 p-3 shadow-sm">
        <label class="form-label fw-bold">Select profile photo</label>
        <input class="form-control" type="file" (change)="onFileSelected($event)" [disabled]="isReadonly">
        <small class="text-muted mt-1">JPG, GIF or PNG. Max size of 800K</small>
      </div>
    </div>
  </div>
</div>
